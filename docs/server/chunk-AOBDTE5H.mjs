import './polyfills.server.mjs';
import{a as j}from"./chunk-LSA3ISQF.mjs";import{a as R}from"./chunk-B23LGR47.mjs";import{a as E}from"./chunk-GR3UZDJ5.mjs";import{a as $}from"./chunk-BNPKAEFT.mjs";import"./chunk-KU5BKOKS.mjs";import"./chunk-GTSSCL6B.mjs";import{l as k,m as F}from"./chunk-GJZWYCQF.mjs";import{j as A,t as M}from"./chunk-AZSGSTTY.mjs";import{Bb as x,Cb as p,Jb as l,Kb as C,Lb as S,Pa as T,Qb as L,Rb as W,Sb as w,Ta as n,Z as c,ba as b,ib as O,kb as m,la as g,ma as h,ob as y,pb as _,qb as v,rb as f,sb as r,tb as s,ub as u,xb as I,ya as P}from"./chunk-3OXFT4D6.mjs";import"./chunk-VVCT4QZE.mjs";var D=i=>["/ProductDetails",i],N=()=>[1,2,3,4,5];function V(i,o){i&1&&u(0,"i",15)}function J(i,o){i&1&&u(0,"i",16)}function B(i,o){if(i&1){let a=I();r(0,"div",3)(1,"div",4)(2,"div",5),u(3,"img",6),s(),r(4,"div",7)(5,"div",8)(6,"h2",9),l(7),s(),r(8,"p",10),l(9),s()(),r(10,"div",11)(11,"span",12),l(12),r(13,"span",13),l(14,"EGP"),s()(),r(15,"div",14),v(16,V,1,0,"i",15,_),O(18,J,1,0,"i",16),r(19,"span",17),l(20),s()()()()(),r(21,"div",18)(22,"div",19),x("click",function(){let e=g(a).$implicit,d=p();return h(d.addToWishList(e._id))}),r(23,"button",20),u(24,"i",21),s()(),r(25,"button",22),x("click",function(){let e=g(a).$implicit,d=p();return h(d.addToCart(e._id))}),l(26,"Add to cart"),s()()()}if(i&2){let a,t=o.$implicit,e=p();n(),m("routerLink",w(8,D,t._id)),n(2),m("src",t.images[0],T),n(4),C(t.category==null?null:t.category.name),n(2),S("",t==null||t.title==null||(a=t.title.split(" "))==null||(a=a.splice(0,2))==null?null:a.join(" "),"."),n(3),S("",t==null?null:t.price," "),n(4),f(W(10,N).slice(0,t==null?null:t.ratingsAverage)),n(2),y(18,t.ratingsAverage%1!==0?18:-1),n(2),C(t==null?null:t.ratingsAverage),n(4),m("ngClass",e.getIconClass(t._id))}}var Z=(()=>{let o=class o{constructor(){this._ProductsService=c(j),this.Id=c(P),this._Router=c(k),this._CartService=c(E),this._ToastrService=c($),this._WishlistService=c(R)}ngOnInit(){this.StopApi=this._ProductsService.getAllProducts().subscribe({next:t=>{console.log(t.metadata.currentPage==2),this.ProductsList=t.data}}),M(this.Id)&&localStorage.setItem("CurrentPage","/Products")}ngOnDestroy(){this.StopApi?.unsubscribe()}progRouterToProductdetails(t){this._Router.navigate(["/Products",t])}addToCart(t){this._CartService.addProductToCart(t).subscribe({next:e=>{this._CartService.CartCount.set(e.numOfCartItems),this.addToCartSuccess(e.message)}})}addToCartSuccess(t){this._ToastrService.success("",`${t}`,{timeOut:2e3})}addToCartFaild(t){this._ToastrService.error("",`${t}`,{timeOut:2e3})}addToWishList(t){this.WishListArr=JSON.parse(localStorage.getItem("ProdcuctIdsWishListArr")),this.WishListArr.includes(t)?this._WishlistService.RemoveProductFromWishlist(t).subscribe({next:e=>{this._WishlistService.wishListCount.set(e.data.length),this.removeFromWishListSuccess(e.message),localStorage.setItem("ProdcuctIdsWishListArr",JSON.stringify(e.data)),this.getIconClass(t)}}):this._WishlistService.AddProductToWishlist(t).subscribe({next:e=>{this._WishlistService.wishListCount.set(e.data.length),this.addToWishListSuccess(e.message),localStorage.setItem("ProdcuctIdsWishListArr",JSON.stringify(e.data)),this.getIconClass(t)}})}getIconClass(t){return this.WishListArr=JSON.parse(localStorage.getItem("ProdcuctIdsWishListArr")),this.WishListArr.includes(t)?"loveIconsolid":"loveIconregular"}addToWishListSuccess(t){this._ToastrService.success("",`${t}`,{timeOut:2e3})}removeFromWishListSuccess(t){this._ToastrService.info("",`${t}`,{timeOut:2e3})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=b({type:o,selectors:[["app-product"]],standalone:!0,features:[L],decls:5,vars:0,consts:[[1,"main","relative"],[1,"container","mx-auto","Coin","pt-5","pb-5"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-5","gap-6"],[1,"product","cr","rounded-lg","shadow-[0px_0px_5px_2px_#48bb78]"],[3,"routerLink"],[1,"w-full","h-48","flex","items-center","justify-center","bg-gray-100"],["alt","Product Image",1,"max-w-full","max-h-full","object-contain",3,"src"],[1,"p-2"],[1,"mb-4"],[1,"text-l","font-bold","main-color"],[1,"text-gray-600","mt-2"],[1,"RatingAndPrice","mt-5","flex","items-center","justify-between","w-full","px-2"],[1,"main-color","text-l","font-bold"],[1,"text-gray-900"],[1,"flex","items-center"],[1,"fas","fa-star","text-yellow-500"],[1,"fa-solid","fa-star-half-stroke","text-yellow-500"],[1,"text-l","font-semibold"],[1,"p-1","text-end"],[3,"click"],[1,"text-end","px-3","mb-2","object-contain"],[1,"fa-solid","fa-heart","text-3xl",3,"ngClass"],[1,"btn-addToCard","link-style-btn-footer","px-5","py-2","w-full",3,"click"]],template:function(e,d){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),v(3,B,27,11,"div",3,_),s()()()),e&2&&(n(3),f(d.ProductsList))},dependencies:[F,A],styles:['.product[_ngcontent-%COMP%]{border-radius:5px;transition:box-shadow .5s;overflow:hidden}.loading[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#240eec00;justify-items:center;align-items:center;z-index:999}.main[_ngcontent-%COMP%]{min-height:620px}.loader[_ngcontent-%COMP%]{width:50px;aspect-ratio:1;border-radius:50%;border:8px solid rgba(0,0,0,0);border-right-color:var(--main-color);position:relative;animation:_ngcontent-%COMP%_l24 1s infinite linear}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-8px;border-radius:50%;border:inherit;animation:inherit;animation-duration:2s}.loader[_ngcontent-%COMP%]:after{animation-duration:4s}@keyframes _ngcontent-%COMP%_l24{to{transform:rotate(1turn)}}.product[_ngcontent-%COMP%]:hover   .btn-addToCard[_ngcontent-%COMP%]{transform:translateY(-5px)}.btn-addToCard[_ngcontent-%COMP%]{transition:.5s;transform:translateY(120%)}.loveIconregular[_ngcontent-%COMP%]{color:#adadad}.loveIconsolid[_ngcontent-%COMP%]{color:var(--main-color);transition:.4s;transform:scale(1.1)}']});let i=o;return i})();export{Z as ProductComponent};
